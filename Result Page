<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç§Ÿå±‹é¢¨éšªè©•ä¼°çµæœ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">ç§Ÿå±‹é¢¨éšªè©•ä¼°çµæœ</h1>
    <div id="result-container" class="space-y-6"></div>
    <div class="mt-8 text-center">
      <button onclick="window.print()" class="px-6 py-3 bg-blue-600 text-white text-lg font-semibold rounded hover:bg-blue-700">åˆ—å°å»ºè­°æ¸…å–®ï¼ˆPDFï¼‰</button>
    </div>
  </div>

  <script src="data.js"></script>
  <script>
    const answers = JSON.parse(localStorage.getItem("answers"));
    const allQuestions = ALL_QUESTIONS; // ä¾†è‡ª data.jsï¼Œäº”å€‹ä¸»é¡Œé™£åˆ—
    const resultContainer = document.getElementById("result-container");

    const riskLevel = score => {
      if (score <= 2) return { level: "ä½é¢¨éšª", color: "green" };
      if (score <= 5) return { level: "ä¸­é¢¨éšª", color: "yellow" };
      return { level: "é«˜é¢¨éšª", color: "red" };
    };

    allQuestions.forEach((group, groupIndex) => {
      const groupTitle = ["æˆ¿å±‹å®‰å…¨èˆ‡åˆæ³•æ€§", "ç§Ÿè³ƒå¥‘ç´„èˆ‡æ³•å¾‹ä¿éšœ", "ç§Ÿé‡‘èˆ‡é¡å¤–è²»ç”¨", "ç”Ÿæ´»æ©Ÿèƒ½èˆ‡ç’°å¢ƒ", "æˆ¿æ±èˆ‡å±…ä½è¦ç¯„"][groupIndex];
      const groupAnswers = answers.slice(groupIndex * 5, (groupIndex + 1) * 5);
      const groupScore = groupAnswers.reduce((sum, a, i) => sum + group[i].options[a].score, 0);
      const risk = riskLevel(groupScore);

      const suggestions = group.map((q, i) => {
        const opt = q.options[groupAnswers[i]];
        return `<div class="mb-4">
          <p class="font-medium">â“ ${q.q}</p>
          <p class="text-sm text-gray-700">ğŸ‘‰ ${opt.advice}</p>
          <p class="text-xs text-gray-500 mt-1">ğŸ“˜ æ³•æ¢ä¾æ“šï¼š${opt.law}</p>
        </div>`;
      }).join("");

      resultContainer.innerHTML += `
        <div class="bg-white p-6 rounded-xl shadow border-l-8 border-${risk.color}-500">
          <h2 class="text-xl font-bold mb-2">${groupTitle}</h2>
          <p class="mb-4">æœ¬ä¸»é¡Œç¸½åˆ†ï¼š${groupScore}ï¼Œé¢¨éšªç­‰ç´šï¼š<span class="font-bold text-${risk.color}-600">${risk.level}</span></p>
          ${suggestions}
        </div>
      `;
    });
  </script>
</body>
</html>
